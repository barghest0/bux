# BUX: ĞŸĞ»Ğ°Ğ½ ÑĞ²Ğ¾Ğ»ÑÑ†Ğ¸Ğ¾Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ñ€Ğ°Ğ·Ğ²Ğ¸Ñ‚Ğ¸Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñ‹

> Ğ’ĞµÑ€ÑĞ¸Ñ: 1.0  
> Ğ”Ğ°Ñ‚Ğ°: 2025-01-24  
> ĞĞ²Ñ‚Ğ¾Ñ€: Tech Lead Analysis

---

## Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ°Ğ½Ğ¸Ğµ

1. [Executive Summary](#1-executive-summary)
2. [Ğ¢ĞµĞºÑƒÑ‰ĞµĞµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ](#2-Ñ‚ĞµĞºÑƒÑ‰ĞµĞµ-ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ)
3. [Ğ¦ĞµĞ»ĞµĞ²Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°](#3-Ñ†ĞµĞ»ĞµĞ²Ğ°Ñ-Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°)
4. [Ğ¤Ğ°Ğ·Ñ‹ Ñ€Ğ°Ğ·Ğ²Ğ¸Ñ‚Ğ¸Ñ](#4-Ñ„Ğ°Ğ·Ñ‹-Ñ€Ğ°Ğ·Ğ²Ğ¸Ñ‚Ğ¸Ñ)
5. [Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ğ»Ğ°Ğ½ Ğ¿Ğ¾ Ñ„Ğ°Ğ·Ğ°Ğ¼](#5-Ğ´ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹-Ğ¿Ğ»Ğ°Ğ½-Ğ¿Ğ¾-Ñ„Ğ°Ğ·Ğ°Ğ¼)
6. [Ğ”Ğ¾Ğ¼ĞµĞ½Ğ½Ğ°Ñ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ](#6-Ğ´Ğ¾Ğ¼ĞµĞ½Ğ½Ğ°Ñ-Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ)
7. [Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ](#7-Ñ‚ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ-Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ)
8. [Ğ Ğ¸ÑĞºĞ¸ Ğ¸ Ğ¼Ğ¸Ñ‚Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¸](#8-Ñ€Ğ¸ÑĞºĞ¸-Ğ¸-Ğ¼Ğ¸Ñ‚Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¸)

---

## 1. Executive Summary

### Ğ¦ĞµĞ»ÑŒ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°
ĞŸĞ¾ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ Ñ†ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ñ‹Ğ¹ Ñ…Ğ°Ğ± Ğ´Ğ»Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ²ÑĞµĞ¼Ğ¸ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ°Ğ¼Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ:
- ĞœÑƒĞ»ÑŒÑ‚Ğ¸Ğ²Ğ°Ğ»ÑÑ‚Ğ½Ñ‹Ğµ ÑÑ‡ĞµÑ‚Ğ°, ĞºĞ°Ñ€Ñ‚Ñ‹, Ğ½Ğ°Ğ»Ğ¸Ñ‡ĞºĞ°
- ĞšÑ€Ğ¸Ğ¿Ñ‚Ğ¾Ğ²Ğ°Ğ»ÑÑ‚Ñ‹
- Ğ˜Ğ½Ğ²ĞµÑÑ‚Ğ¸Ñ†Ğ¸Ğ¸ (Ğ°ĞºÑ†Ğ¸Ğ¸, Ñ„Ğ¾Ğ½Ğ´Ñ‹, Ğ¼ĞµÑ‚Ğ°Ğ»Ğ»Ñ‹)
- ĞĞµĞ´Ğ²Ğ¸Ğ¶Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ
- ĞĞ±Ñ‰Ğ¸Ğ¹ net worth Ğ¸ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ°

### Ğ¢ĞµĞºÑƒÑ‰ĞµĞµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ
**Backend:** 3 Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ° (User, Transaction, Investment) â€” MVP ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ, ~40% Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸  
**Android:** Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Clean Architecture â€” ~30% Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸  
**iOS:** ĞĞµ Ğ½Ğ°Ñ‡Ğ°Ñ‚

### ĞÑ†ĞµĞ½ĞºĞ° Ñ‚ĞµĞºÑƒÑ‰ĞµĞ³Ğ¾ ĞºĞ¾Ğ´Ğ°

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | ĞÑ†ĞµĞ½ĞºĞ° | ĞšĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¹ |
|-----------|--------|-------------|
| Backend Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° | 7/10 | Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞµĞµ Ñ€Ğ°Ğ·Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ ÑĞ»Ğ¾ĞµĞ², Clean Architecture |
| Backend Ğ´Ğ¾Ğ¼ĞµĞ½ | 4/10 | ĞĞ½ĞµĞ¼Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸, float64 Ğ´Ğ»Ñ Ğ´ĞµĞ½ĞµĞ³ |
| Backend Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ | 3/10 | Hardcoded JWT secret, Ğ½ĞµÑ‚ rate limiting |
| Android Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° | 7/10 | Clean Architecture, MVVM |
| Android Ğ´Ğ¾Ğ¼ĞµĞ½ | 4/10 | ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ |
| Android Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ | 2/10 | Hardcoded token, cleartext traffic |

### Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ
**Ğ­Ğ²Ğ¾Ğ»ÑÑ†Ğ¸Ğ¾Ğ½Ğ½Ğ¾Ğµ Ñ€Ğ°Ğ·Ğ²Ğ¸Ñ‚Ğ¸Ğµ** â€” Ğ½Ğµ Ğ¿ĞµÑ€ĞµĞ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµĞ¼ Ñ Ğ½ÑƒĞ»Ñ, Ğ° ÑƒĞ»ÑƒÑ‡ÑˆĞ°ĞµĞ¼ Ğ¸Ñ‚ĞµÑ€Ğ°Ñ‚Ğ¸Ğ²Ğ½Ğ¾, ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑÑ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ÑÑ‰Ğ¸Ğ¹ ĞºĞ¾Ğ´.

---

## 2. Ğ¢ĞµĞºÑƒÑ‰ĞµĞµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ

### 2.1 Backend (Go + Docker)

```
server/
â”œâ”€â”€ user/           # ĞÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ, JWT
â”œâ”€â”€ transaction/    # Ğ¢Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¸, ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸
â”œâ”€â”€ investment/     # Ğ‘Ñ€Ğ¾ĞºĞµÑ€Ñ‹, Ğ¿Ğ¾Ñ€Ñ‚Ñ„ĞµĞ»Ğ¸, ÑĞ´ĞµĞ»ĞºĞ¸
â”œâ”€â”€ init/           # SQL Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ‘Ğ”
â””â”€â”€ docker-compose.yaml
```

**Ğ§Ñ‚Ğ¾ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚:**
- JWT Ğ°ÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ (24h TTL)
- CRUD Ğ´Ğ»Ñ User, Transaction, Category, Broker, Portfolio, Trade
- PostgreSQL Ñ Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ¾Ğ¹ Ğ‘Ğ” Ğ½Ğ° ÑĞµÑ€Ğ²Ğ¸Ñ
- Docker Compose Ğ´Ğ»Ñ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğ¹ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸
- Clean Architecture Ğ²Ğ¾ Ğ²ÑĞµÑ… ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ñ…

**ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹:**

| ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ° | Severity | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|----------|----------|----------|
| Hardcoded JWT secret | CRITICAL | `var JwtKey = []byte("key")` |
| float64 Ğ´Ğ»Ñ Ğ´ĞµĞ½ĞµĞ³ | CRITICAL | ĞŸĞ¾Ñ‚ĞµÑ€Ñ Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ² Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ñ‹Ñ… Ñ€Ğ°ÑÑ‡ĞµÑ‚Ğ°Ñ… |
| ĞĞµÑ‚ Account Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ | HIGH | ĞĞµĞ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ñ‚ÑŒ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ |
| ĞĞµÑĞ¾Ğ³Ğ»Ğ°ÑĞ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ‚Ğ¸Ğ¿Ñ‹ UserID | HIGH | int/uint/string Ğ² Ñ€Ğ°Ğ·Ğ½Ñ‹Ñ… ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ñ… |
| ĞĞµÑ‚ pagination | MEDIUM | GetAll Ğ±ĞµĞ· Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ğ¾Ğ² |
| ĞĞµÑ‚ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ğ¸ | MEDIUM | ĞœĞ¾Ğ¶Ğ½Ğ¾ ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ñ Ñ Amount < 0 |

### 2.2 Android (Kotlin + Compose)

```
app/android/
â””â”€â”€ src/main/java/com/barghest/bux/
    â”œâ”€â”€ ui/           # Screens + ViewModels
    â”œâ”€â”€ domain/       # Models + Services
    â”œâ”€â”€ data/         # Network + Repositories
    â””â”€â”€ di/           # Koin modules
```

**Ğ§Ñ‚Ğ¾ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚:**
- Login screen Ñ JWT
- Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¹
- Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¸
- Koin DI
- Material 3 theming

**ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹:**

| ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ° | Severity | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|----------|----------|----------|
| Hardcoded JWT token | CRITICAL | Token Ğ² ĞºĞ¾Ğ´Ğµ Api.kt |
| Cleartext traffic | HIGH | HTTP Ğ±ĞµĞ· ÑˆĞ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ |
| ĞĞµÑ‚ Room DB | HIGH | ĞĞµÑ‚ offline support |
| Silent failures | MEDIUM | getAll() Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ [] Ğ¿Ñ€Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞµ |
| ĞĞµÑ‚ Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾ÑĞ»Ğµ login | MEDIUM | TODO Ğ² ĞºĞ¾Ğ´Ğµ |

---

## 3. Ğ¦ĞµĞ»ĞµĞ²Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

### 3.1 Bounded Contexts

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         BUX Platform                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Identity &    â”‚    Finance      â”‚      Analytics &            â”‚
â”‚    Access       â”‚     Core        â”‚      Reporting              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ User          â”‚ â€¢ Account       â”‚ â€¢ Net Worth                 â”‚
â”‚ â€¢ Auth          â”‚ â€¢ Transaction   â”‚ â€¢ Performance               â”‚
â”‚ â€¢ Family        â”‚ â€¢ Asset         â”‚ â€¢ Reports                   â”‚
â”‚ â€¢ Permissions   â”‚ â€¢ Investment    â”‚ â€¢ Export                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 Backend Target Architecture

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Clients    â”‚
                    â”‚ Android/iOS  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ API Gateway  â”‚  â† Rate limiting, Auth
                    â”‚   (Future)   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                 â”‚                 â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
    â”‚  User   â”‚      â”‚  Finance  â”‚    â”‚Analytics  â”‚
    â”‚ Service â”‚      â”‚  Service  â”‚    â”‚ Service   â”‚
    â”‚  :8081  â”‚      â”‚   :8082   â”‚    â”‚  :8084    â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
         â”‚                 â”‚                 â”‚
         â”‚           â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”           â”‚
         â”‚           â”‚Investment â”‚           â”‚
         â”‚           â”‚ Service   â”‚           â”‚
         â”‚           â”‚  :8083    â”‚           â”‚
         â”‚           â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜           â”‚
         â”‚                 â”‚                 â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
    â”‚ users   â”‚      â”‚ finance   â”‚    â”‚analytics  â”‚
    â”‚   DB    â”‚      â”‚    DB     â”‚    â”‚    DB     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 Ğ”Ğ¾Ğ¼ĞµĞ½Ğ½Ñ‹Ğµ ÑÑƒÑ‰Ğ½Ğ¾ÑÑ‚Ğ¸ (Target)

```
Account (Asset)
â”œâ”€â”€ id: UUID
â”œâ”€â”€ userId: UUID
â”œâ”€â”€ type: AccountType (bank_account, card, cash, crypto, investment, property)
â”œâ”€â”€ name: string
â”œâ”€â”€ currency: Currency
â”œâ”€â”€ balance: Decimal
â”œâ”€â”€ metadata: JSON
â”œâ”€â”€ createdAt, updatedAt
â””â”€â”€ history: []BalanceSnapshot

Transaction
â”œâ”€â”€ id: UUID
â”œâ”€â”€ userId: UUID
â”œâ”€â”€ type: TransactionType (income, expense, transfer, investment_buy, investment_sell, dividend, interest)
â”œâ”€â”€ accountId: UUID (source)
â”œâ”€â”€ destinationAccountId: UUID? (for transfers)
â”œâ”€â”€ amount: Decimal
â”œâ”€â”€ currency: Currency
â”œâ”€â”€ category: Category
â”œâ”€â”€ description: string
â”œâ”€â”€ transactionDate: DateTime
â”œâ”€â”€ status: TransactionStatus (pending, completed, failed)
â””â”€â”€ metadata: JSON

Investment (extends Account)
â”œâ”€â”€ broker: Broker
â”œâ”€â”€ portfolio: Portfolio
â”œâ”€â”€ holdings: []Holding
â””â”€â”€ trades: []Trade

Holding
â”œâ”€â”€ security: Security
â”œâ”€â”€ quantity: Decimal
â”œâ”€â”€ averageCost: Decimal
â”œâ”€â”€ currentPrice: Decimal
â””â”€â”€ unrealizedPnL: Decimal
```

### 3.4 Android Target Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Presentation                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Screens  â”‚  â”‚ ViewModelsâ”‚  â”‚  States   â”‚    â”‚
â”‚  â”‚ (Compose) â”‚  â”‚  (MVVM)   â”‚  â”‚  (UiState)â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   Domain                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Models   â”‚  â”‚ Use Cases â”‚  â”‚Repository â”‚    â”‚
â”‚  â”‚           â”‚  â”‚           â”‚  â”‚ Interfacesâ”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Data                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   Room    â”‚  â”‚   Ktor    â”‚  â”‚   Sync    â”‚    â”‚
â”‚  â”‚    DB     â”‚  â”‚  Client   â”‚  â”‚  Manager  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. Ğ¤Ğ°Ğ·Ñ‹ Ñ€Ğ°Ğ·Ğ²Ğ¸Ñ‚Ğ¸Ñ

```
Phase 0          Phase 1           Phase 2           Phase 3
Security &       Core Domain       Investments       Analytics
Foundation       Model             & Assets          & Scale
   â”‚                â”‚                  â”‚                â”‚
   â–¼                â–¼                  â–¼                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Fix    â”‚     â”‚ Account    â”‚    â”‚ Investmentâ”‚    â”‚ Net Worthâ”‚
â”‚Criticalâ”‚ â”€â”€â–º â”‚ Transactionâ”‚ â”€â”€â–ºâ”‚ Holdings  â”‚ â”€â”€â–ºâ”‚ Reports  â”‚
â”‚Issues  â”‚     â”‚ Categories â”‚    â”‚ History   â”‚    â”‚ Export   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Timeline Overview

| Ğ¤Ğ°Ğ·Ğ° | ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ | Ğ¤Ğ¾ĞºÑƒÑ | Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ |
|------|----------|-------|-----------|
| 0 | Foundation | Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ, Ñ‚Ğ¸Ğ¿Ñ‹ | Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ñ‹Ğ¹, ÑÑ‚Ğ°Ğ±Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ„ÑƒĞ½Ğ´Ğ°Ğ¼ĞµĞ½Ñ‚ |
| 1 | Core Domain | Account, Transaction | ĞŸĞ¾Ğ»Ğ½Ğ¾Ñ†ĞµĞ½Ğ½Ñ‹Ğ¹ ÑƒÑ‡ĞµÑ‚ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ² |
| 2 | Investments | Portfolio, Holdings | Ğ˜Ğ½Ğ²ĞµÑÑ‚Ğ¸Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğ¹ Ñ‚Ñ€ĞµĞºĞ¸Ğ½Ğ³ |
| 3 | Analytics | Net Worth, Reports | ĞĞ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ° Ğ¸ Ğ¾Ñ‚Ñ‡ĞµÑ‚Ñ‹ |

---

## 5. Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ğ»Ğ°Ğ½ Ğ¿Ğ¾ Ñ„Ğ°Ğ·Ğ°Ğ¼

## Phase 0: Security & Foundation

> Ğ¦ĞµĞ»ÑŒ: Ğ£ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚Ğ¸ Ğ¸ Ğ¿Ğ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ñ„ÑƒĞ½Ğ´Ğ°Ğ¼ĞµĞ½Ñ‚

### Backend Tasks

#### 0.1 Security Fixes (CRITICAL)

**JWT Secret Ğ¸Ğ· Environment:**
```go
// Ğ”Ğ¾
var JwtKey = []byte("key")

// ĞŸĞ¾ÑĞ»Ğµ
var JwtKey = []byte(os.Getenv("JWT_SECRET"))
```

Ğ¤Ğ°Ğ¹Ğ»Ñ‹ Ğ´Ğ»Ñ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ:
- `server/user/internal/infra/auth/jwt.go`
- `server/transaction/internal/infra/auth/jwt.go`
- `server/investment/internal/infra/auth/jwt.go`
- `server/docker-compose.yaml` (Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ env)

**Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ .env.example:**
```env
JWT_SECRET=your-256-bit-secret-key-here
POSTGRES_USER=barghest
POSTGRES_PASSWORD=barghest
```

#### 0.2 Decimal Ğ´Ğ»Ñ Ğ´ĞµĞ½ĞµĞ¶Ğ½Ñ‹Ñ… Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğ¹

Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºÑƒ `github.com/shopspring/decimal`:

```go
// Ğ”Ğ¾
Amount float64

// ĞŸĞ¾ÑĞ»Ğµ
Amount decimal.Decimal `gorm:"type:decimal(19,4)"`
```

Ğ¤Ğ°Ğ¹Ğ»Ñ‹:
- `server/transaction/internal/domain/model/transaction.go`
- `server/investment/internal/domain/model/model.go`

#### 0.3 Ğ£Ğ½Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ UserID

Ğ’ÑĞµ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ `uint`:

```go
// Ğ’ĞµĞ·Ğ´Ğµ
UserID uint `gorm:"index;not null"`
```

Ğ¤Ğ°Ğ¹Ğ»Ñ‹:
- `server/investment/internal/domain/model/model.go` (Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ string â†’ uint)

#### 0.4 HTTP Status Codes

```go
// Ğ”Ğ¾
c.JSON(201, response)

// ĞŸĞ¾ÑĞ»Ğµ
c.JSON(http.StatusOK, response)
```

Ğ¤Ğ°Ğ¹Ğ»Ñ‹:
- `server/user/internal/presentation/http/http.go`
- `server/transaction/internal/presentation/http/transactions.go`

#### 0.5 Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ

```go
// Transaction amount validation
if tx.Amount.LessThanOrEqual(decimal.Zero) {
    return nil, ErrInvalidAmount
}
```

### Android Tasks

#### 0.6 Ğ£Ğ±Ñ€Ğ°Ñ‚ÑŒ hardcoded token

**Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ TokenManager:**
```kotlin
class TokenManager(private val context: Context) {
    private val prefs = EncryptedSharedPreferences.create(...)
    
    fun saveToken(token: String)
    fun getToken(): String?
    fun clearToken()
}
```

#### 0.7 Ğ”Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Authorization header

```kotlin
// Api.kt
install(DefaultRequest) {
    header("Authorization", "Bearer ${tokenManager.getToken()}")
}
```

#### 0.8 ĞÑ‚ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ cleartext traffic

```xml
<!-- network_security_config.xml -->
<base-config cleartextTrafficPermitted="false">
    <trust-anchors>
        <certificates src="system" />
    </trust-anchors>
</base-config>

<!-- Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ»Ñ debug -->
<debug-overrides>
    <trust-anchors>
        <certificates src="user" />
    </trust-anchors>
</debug-overrides>
```

#### 0.9 Error Handling

```kotlin
// Repository
suspend fun getAll(): Result<List<Transaction>>  // ĞĞµ List<Transaction>
```

### Deliverables Phase 0
- [ ] JWT secret Ğ¸Ğ· environment
- [ ] Decimal Ğ´Ğ»Ñ Amount/Price/Quantity
- [ ] Ğ•Ğ´Ğ¸Ğ½Ñ‹Ğ¹ Ñ‚Ğ¸Ğ¿ UserID (uint)
- [ ] ĞšĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ñ‹Ğµ HTTP status codes
- [ ] Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ
- [ ] Android: secure token storage
- [ ] Android: no cleartext Ğ² production

---

## Phase 1: Core Domain Model

> Ğ¦ĞµĞ»ÑŒ: ĞŸĞ¾ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½ÑƒÑ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²ÑƒÑ Ğ´Ğ¾Ğ¼ĞµĞ½Ğ½ÑƒÑ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ

### 1.1 ĞœĞ¾Ğ´ĞµĞ»ÑŒ Account (Asset)

**ĞĞ¾Ğ²Ğ°Ñ ÑÑƒÑ‰Ğ½Ğ¾ÑÑ‚ÑŒ â€” Ñ†ĞµĞ½Ñ‚Ñ€ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ğ¾Ğ¹ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸:**

```go
// server/transaction/internal/domain/model/account.go

type AccountType string

const (
    AccountTypeBankAccount AccountType = "bank_account"
    AccountTypeCard        AccountType = "card"
    AccountTypeCash        AccountType = "cash"
    AccountTypeCrypto      AccountType = "crypto"
    AccountTypeInvestment  AccountType = "investment"
    AccountTypeProperty    AccountType = "property"
)

type Account struct {
    ID        uint            `gorm:"primaryKey"`
    UserID    uint            `gorm:"index;not null"`
    Type      AccountType     `gorm:"type:account_type;not null"`
    Name      string          `gorm:"not null"`
    Currency  string          `gorm:"type:char(3);not null"`
    Balance   decimal.Decimal `gorm:"type:decimal(19,4);default:0"`
    IsActive  bool            `gorm:"default:true"`
    Metadata  JSON            `gorm:"type:jsonb"`
    CreatedAt time.Time
    UpdatedAt time.Time
    DeletedAt gorm.DeletedAt
}
```

### 1.2 Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ğ°Ñ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ Transaction

```go
type TransactionType string

const (
    TransactionTypeIncome         TransactionType = "income"
    TransactionTypeExpense        TransactionType = "expense"
    TransactionTypeTransfer       TransactionType = "transfer"
    TransactionTypeInvestmentBuy  TransactionType = "investment_buy"
    TransactionTypeInvestmentSell TransactionType = "investment_sell"
    TransactionTypeDividend       TransactionType = "dividend"
    TransactionTypeInterest       TransactionType = "interest"
)

type TransactionStatus string

const (
    TransactionStatusPending   TransactionStatus = "pending"
    TransactionStatusCompleted TransactionStatus = "completed"
    TransactionStatusFailed    TransactionStatus = "failed"
)

type Transaction struct {
    ID                   uint              `gorm:"primaryKey"`
    UserID               uint              `gorm:"index;not null"`
    Type                 TransactionType   `gorm:"type:transaction_type;not null"`
    AccountID            uint              `gorm:"index;not null"`          // Source account
    DestinationAccountID *uint             `gorm:"index"`                   // For transfers
    Amount               decimal.Decimal   `gorm:"type:decimal(19,4);not null"`
    Currency             string            `gorm:"type:char(3);not null"`
    CategoryID           *uint             `gorm:"index"`
    Category             *Category
    Description          string            `gorm:"type:text"`
    TransactionDate      time.Time         `gorm:"not null"`
    Status               TransactionStatus `gorm:"type:transaction_status;default:'completed'"`
    Metadata             JSON              `gorm:"type:jsonb"`
    CreatedAt            time.Time
    UpdatedAt            time.Time
    DeletedAt            gorm.DeletedAt
}
```

### 1.3 Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¹

```go
// server/transaction/internal/domain/service/transaction_service.go

func (s *TransactionService) CreateTransaction(tx *Transaction) (*Transaction, error) {
    // 1. Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ
    if err := s.validateTransaction(tx); err != nil {
        return nil, err
    }
    
    // 2. ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ account
    account, err := s.accountRepo.GetByID(tx.AccountID)
    if err != nil {
        return nil, ErrAccountNotFound
    }
    
    // 3. ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ²Ğ»Ğ°Ğ´ĞµĞ»ÑŒÑ†Ğ°
    if account.UserID != tx.UserID {
        return nil, ErrAccountAccessDenied
    }
    
    // 4. ĞŸÑ€Ğ¸Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ñ Ğº Ğ±Ğ°Ğ»Ğ°Ğ½ÑÑƒ
    switch tx.Type {
    case TransactionTypeIncome, TransactionTypeDividend, TransactionTypeInterest:
        account.Balance = account.Balance.Add(tx.Amount)
    case TransactionTypeExpense:
        if account.Balance.LessThan(tx.Amount) {
            return nil, ErrInsufficientFunds
        }
        account.Balance = account.Balance.Sub(tx.Amount)
    case TransactionTypeTransfer:
        return s.handleTransfer(tx, account)
    }
    
    // 5. Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ğ² Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¸ Ğ‘Ğ”
    return s.repo.CreateWithAccountUpdate(tx, account)
}
```

### 1.4 API Ğ´Ğ»Ñ Account

```
POST   /accounts              # Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑÑ‡ĞµÑ‚
GET    /accounts              # Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº ÑÑ‡ĞµÑ‚Ğ¾Ğ² Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
GET    /accounts/:id          # Ğ”ĞµÑ‚Ğ°Ğ»Ğ¸ ÑÑ‡ĞµÑ‚Ğ°
PUT    /accounts/:id          # ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ÑÑ‡ĞµÑ‚
DELETE /accounts/:id          # Ğ”ĞµĞ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑÑ‡ĞµÑ‚
GET    /accounts/:id/balance  # Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğ¹ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ
GET    /accounts/:id/history  # Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ°
```

### 1.5 Android: Room Database

```kotlin
// Database entities
@Entity(tableName = "accounts")
data class AccountEntity(
    @PrimaryKey val id: Int,
    val userId: Int,
    val type: String,
    val name: String,
    val currency: String,
    val balance: String,  // Decimal as String
    val isActive: Boolean,
    val syncedAt: Long
)

@Entity(tableName = "transactions")
data class TransactionEntity(
    @PrimaryKey val id: Int,
    val userId: Int,
    val type: String,
    val accountId: Int,
    val destinationAccountId: Int?,
    val amount: String,
    val currency: String,
    val categoryId: Int?,
    val description: String?,
    val transactionDate: Long,
    val status: String,
    val syncedAt: Long
)

// Database
@Database(
    entities = [AccountEntity::class, TransactionEntity::class, CategoryEntity::class],
    version = 1
)
abstract class BuxDatabase : RoomDatabase() {
    abstract fun accountDao(): AccountDao
    abstract fun transactionDao(): TransactionDao
}
```

### 1.6 Android: Offline-First Repository

```kotlin
class TransactionRepositoryImpl(
    private val api: Api,
    private val dao: TransactionDao,
    private val syncManager: SyncManager
) : TransactionRepository {
    
    override fun getTransactions(): Flow<List<Transaction>> {
        return dao.getAllAsFlow()
            .map { entities -> entities.map { it.toDomain() } }
    }
    
    override suspend fun refresh(): Result<Unit> {
        return try {
            val remote = api.fetchTransactions().getOrThrow()
            dao.insertAll(remote.map { it.toEntity() })
            Result.success(Unit)
        } catch (e: Exception) {
            Result.failure(e)
        }
    }
    
    override suspend fun create(tx: NewTransaction): Result<Transaction> {
        // 1. Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾ ĞºĞ°Ğº pending
        val entity = tx.toEntity(status = "pending")
        dao.insert(entity)
        
        // 2. Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ ÑĞµÑ€Ğ²ĞµÑ€Ğ¾Ğ¼
        return syncManager.enqueue(SyncOperation.CreateTransaction(entity))
    }
}
```

### Deliverables Phase 1
- [ ] Account Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ (backend)
- [ ] Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ğ°Ñ Transaction Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ
- [ ] Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° Ñ Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ°Ğ¼Ğ¸
- [ ] Account API endpoints
- [ ] Room Database (Android)
- [ ] Offline-first Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¸
- [ ] Sync Manager Ğ±Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹

---

## Phase 2: Investments & Assets

> Ğ¦ĞµĞ»ÑŒ: ĞŸĞ¾Ğ»Ğ½Ğ¾Ñ†ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¸Ğ½Ğ²ĞµÑÑ‚Ğ¸Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğ¹ Ñ‚Ñ€ĞµĞºĞ¸Ğ½Ğ³

### 2.1 Ğ£Ğ»ÑƒÑ‡ÑˆĞµĞ½Ğ½Ğ°Ñ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ Holdings

```go
// server/investment/internal/domain/model/holding.go

type Holding struct {
    ID           uint            `gorm:"primaryKey"`
    PortfolioID  uint            `gorm:"index;not null"`
    SecurityID   uint            `gorm:"index;not null"`
    Security     *Security
    Quantity     decimal.Decimal `gorm:"type:decimal(19,8)"`
    AverageCost  decimal.Decimal `gorm:"type:decimal(19,4)"`  // Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ Ñ†ĞµĞ½Ğ° Ğ¿Ğ¾ĞºÑƒĞ¿ĞºĞ¸
    TotalCost    decimal.Decimal `gorm:"type:decimal(19,4)"`  // ĞĞ±Ñ‰Ğ°Ñ ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ
    UpdatedAt    time.Time
}
```

### 2.2 Tax Lots Ğ´Ğ»Ñ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ ÑƒÑ‡ĞµÑ‚Ğ°

```go
type TaxLot struct {
    ID          uint            `gorm:"primaryKey"`
    HoldingID   uint            `gorm:"index;not null"`
    TradeID     uint            `gorm:"index;not null"`
    Quantity    decimal.Decimal `gorm:"type:decimal(19,8)"`
    CostBasis   decimal.Decimal `gorm:"type:decimal(19,4)"`
    AcquiredAt  time.Time
    SoldAt      *time.Time
}
```

### 2.3 Price History

```go
type PriceHistory struct {
    ID         uint            `gorm:"primaryKey"`
    SecurityID uint            `gorm:"index;not null"`
    Date       time.Time       `gorm:"index;not null"`
    Open       decimal.Decimal `gorm:"type:decimal(19,4)"`
    High       decimal.Decimal `gorm:"type:decimal(19,4)"`
    Low        decimal.Decimal `gorm:"type:decimal(19,4)"`
    Close      decimal.Decimal `gorm:"type:decimal(19,4)"`
    Volume     int64
}
```

### 2.4 Ğ Ğ°ÑÑ‡ĞµÑ‚ P&L

```go
func (s *InvestmentService) CalculatePortfolioValue(portfolioID uint) (*PortfolioValue, error) {
    holdings, err := s.repo.GetHoldings(portfolioID)
    if err != nil {
        return nil, err
    }
    
    result := &PortfolioValue{
        Holdings: make([]HoldingValue, 0, len(holdings)),
    }
    
    for _, h := range holdings {
        currentPrice, err := s.priceService.GetCurrentPrice(h.SecurityID)
        if err != nil {
            continue
        }
        
        marketValue := h.Quantity.Mul(currentPrice)
        unrealizedPnL := marketValue.Sub(h.TotalCost)
        unrealizedPnLPercent := unrealizedPnL.Div(h.TotalCost).Mul(decimal.NewFromInt(100))
        
        result.Holdings = append(result.Holdings, HoldingValue{
            Security:             h.Security,
            Quantity:             h.Quantity,
            AverageCost:          h.AverageCost,
            CurrentPrice:         currentPrice,
            MarketValue:          marketValue,
            UnrealizedPnL:        unrealizedPnL,
            UnrealizedPnLPercent: unrealizedPnLPercent,
        })
        
        result.TotalMarketValue = result.TotalMarketValue.Add(marketValue)
        result.TotalCost = result.TotalCost.Add(h.TotalCost)
    }
    
    result.TotalUnrealizedPnL = result.TotalMarketValue.Sub(result.TotalCost)
    return result, nil
}
```

### 2.5 API Investments

```
GET  /portfolios/:id/value          # Ğ¢ĞµĞºÑƒÑ‰Ğ°Ñ ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ Ğ¿Ğ¾Ñ€Ñ‚Ñ„ĞµĞ»Ñ
GET  /portfolios/:id/holdings       # Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¹ Ñ P&L
GET  /portfolios/:id/performance    # Ğ”Ğ¾Ñ…Ğ¾Ğ´Ğ½Ğ¾ÑÑ‚ÑŒ Ğ·Ğ° Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´
GET  /securities/:id/price          # Ğ¢ĞµĞºÑƒÑ‰Ğ°Ñ Ñ†ĞµĞ½Ğ°
GET  /securities/:id/history        # Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ñ†ĞµĞ½
```

### 2.6 External Price API Integration

```go
// server/investment/internal/infra/external/price_provider.go

type PriceProvider interface {
    GetCurrentPrice(symbol string) (decimal.Decimal, error)
    GetHistoricalPrices(symbol string, from, to time.Time) ([]PricePoint, error)
}

type AlphaVantagePriceProvider struct {
    apiKey string
    client *http.Client
}

func (p *AlphaVantagePriceProvider) GetCurrentPrice(symbol string) (decimal.Decimal, error) {
    // Implementation
}
```

### Deliverables Phase 2
- [ ] Holding Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ Ñ Ñ€Ğ°ÑÑ‡ĞµÑ‚Ğ¾Ğ¼ ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸
- [ ] Tax Lots Ğ´Ğ»Ñ ÑƒÑ‡ĞµÑ‚Ğ° ÑĞµĞ±ĞµÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸
- [ ] Price History
- [ ] P&L Ñ€Ğ°ÑÑ‡ĞµÑ‚Ñ‹
- [ ] External price API integration
- [ ] Android: ÑĞºÑ€Ğ°Ğ½ Ğ¿Ğ¾Ñ€Ñ‚Ñ„ĞµĞ»Ñ
- [ ] Android: ÑĞºÑ€Ğ°Ğ½ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¹ Ñ P&L

---

## Phase 3: Analytics & Scale

> Ğ¦ĞµĞ»ÑŒ: Net Worth, Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ°, Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ Ğº Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

### 3.1 Net Worth Aggregation

```go
// server/analytics/internal/domain/service/networth_service.go

type NetWorthService struct {
    accountRepo    AccountRepository
    investmentRepo InvestmentRepository
    currencyService CurrencyService
}

func (s *NetWorthService) CalculateNetWorth(userID uint, baseCurrency string) (*NetWorth, error) {
    // 1. ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ ÑÑ‡ĞµÑ‚Ğ°
    accounts, err := s.accountRepo.GetByUserID(userID)
    if err != nil {
        return nil, err
    }
    
    // 2. ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ Ğ¿Ğ¾Ñ€Ñ‚Ñ„ĞµĞ»Ğ¸
    portfolios, err := s.investmentRepo.GetPortfoliosByUserID(userID)
    if err != nil {
        return nil, err
    }
    
    result := &NetWorth{
        BaseCurrency: baseCurrency,
        AsAt:         time.Now(),
        Breakdown:    make([]AssetBreakdown, 0),
    }
    
    // 3. ĞĞ³Ñ€ĞµĞ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑÑ‡ĞµÑ‚Ğ°
    for _, acc := range accounts {
        converted := s.currencyService.Convert(acc.Balance, acc.Currency, baseCurrency)
        result.TotalAssets = result.TotalAssets.Add(converted)
        result.Breakdown = append(result.Breakdown, AssetBreakdown{
            Type:     string(acc.Type),
            Name:     acc.Name,
            Value:    converted,
            Currency: baseCurrency,
        })
    }
    
    // 4. ĞĞ³Ñ€ĞµĞ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¸Ğ½Ğ²ĞµÑÑ‚Ğ¸Ñ†Ğ¸Ğ¸
    for _, p := range portfolios {
        value, _ := s.investmentRepo.CalculatePortfolioValue(p.ID)
        converted := s.currencyService.Convert(value.TotalMarketValue, p.BaseCurrency, baseCurrency)
        result.TotalAssets = result.TotalAssets.Add(converted)
        result.Breakdown = append(result.Breakdown, AssetBreakdown{
            Type:     "investment",
            Name:     p.Name,
            Value:    converted,
            Currency: baseCurrency,
        })
    }
    
    return result, nil
}
```

### 3.2 Net Worth History

```go
type NetWorthSnapshot struct {
    ID         uint            `gorm:"primaryKey"`
    UserID     uint            `gorm:"index;not null"`
    Date       time.Time       `gorm:"index;not null"`
    TotalValue decimal.Decimal `gorm:"type:decimal(19,4)"`
    Currency   string          `gorm:"type:char(3)"`
    Breakdown  JSON            `gorm:"type:jsonb"`
}
```

Scheduled job Ğ´Ğ»Ñ ĞµĞ¶ĞµĞ´Ğ½ĞµĞ²Ğ½Ğ¾Ğ³Ğ¾ snapshot:
```go
func (s *SchedulerService) DailyNetWorthSnapshot() {
    users, _ := s.userRepo.GetAllActive()
    for _, user := range users {
        netWorth, _ := s.netWorthService.CalculateNetWorth(user.ID, user.BaseCurrency)
        s.snapshotRepo.Create(&NetWorthSnapshot{
            UserID:     user.ID,
            Date:       time.Now().Truncate(24 * time.Hour),
            TotalValue: netWorth.TotalAssets,
            Currency:   user.BaseCurrency,
            Breakdown:  netWorth.Breakdown,
        })
    }
}
```

### 3.3 Currency Service

```go
type CurrencyService struct {
    rateProvider RateProvider
    cache        *cache.Cache
}

func (s *CurrencyService) Convert(amount decimal.Decimal, from, to string) decimal.Decimal {
    if from == to {
        return amount
    }
    rate := s.getRate(from, to)
    return amount.Mul(rate)
}

func (s *CurrencyService) getRate(from, to string) decimal.Decimal {
    cacheKey := fmt.Sprintf("%s_%s", from, to)
    if cached, ok := s.cache.Get(cacheKey); ok {
        return cached.(decimal.Decimal)
    }
    
    rate, _ := s.rateProvider.GetRate(from, to)
    s.cache.Set(cacheKey, rate, 1*time.Hour)
    return rate
}
```

### 3.4 API Analytics

```
GET /analytics/networth                    # Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğ¹ net worth
GET /analytics/networth/history            # Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ net worth
GET /analytics/networth/breakdown          # Breakdown Ğ¿Ğ¾ Ñ‚Ğ¸Ğ¿Ğ°Ğ¼ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¾Ğ²
GET /analytics/income-expense              # Income vs Expense Ğ·Ğ° Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´
GET /analytics/performance                 # Ğ”Ğ¾Ñ…Ğ¾Ğ´Ğ½Ğ¾ÑÑ‚ÑŒ Ğ¿Ğ¾Ñ€Ñ‚Ñ„ĞµĞ»Ñ
```

### 3.5 Android Analytics Screens

```kotlin
// NetWorthScreen
@Composable
fun NetWorthScreen(viewModel: NetWorthViewModel = koinViewModel()) {
    val state by viewModel.state.collectAsState()
    
    Column {
        // Total Net Worth Card
        NetWorthCard(
            total = state.totalNetWorth,
            change = state.change,
            changePercent = state.changePercent
        )
        
        // Chart
        NetWorthChart(data = state.history)
        
        // Breakdown
        AssetBreakdownList(items = state.breakdown)
    }
}
```

### 3.6 Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ Ğº Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

**API Gateway (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾):**
```yaml
# Kong / Nginx / Traefik
services:
  api-gateway:
    routes:
      - path: /api/v1/auth/*  -> user-service:8081
      - path: /api/v1/accounts/* -> transaction-service:8082
      - path: /api/v1/transactions/* -> transaction-service:8082
      - path: /api/v1/investments/* -> investment-service:8083
      - path: /api/v1/analytics/* -> analytics-service:8084
```

**Pagination Ğ²ĞµĞ·Ğ´Ğµ:**
```go
type PaginatedResponse[T any] struct {
    Data       []T   `json:"data"`
    Page       int   `json:"page"`
    PageSize   int   `json:"page_size"`
    TotalCount int64 `json:"total_count"`
    TotalPages int   `json:"total_pages"`
}
```

### Deliverables Phase 3
- [ ] Net Worth calculation service
- [ ] Net Worth history snapshots
- [ ] Currency conversion service
- [ ] Analytics API endpoints
- [ ] Android: Net Worth screen
- [ ] Android: Charts (MPAndroidChart Ğ¸Ğ»Ğ¸ Compose Charts)
- [ ] Pagination Ğ²Ğ¾ Ğ²ÑĞµÑ… ÑĞ¿Ğ¸ÑĞºĞ°Ñ…
- [ ] (Optional) API Gateway

---

## 6. Ğ”Ğ¾Ğ¼ĞµĞ½Ğ½Ğ°Ñ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ

### 6.1 Entity Relationship Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    User     â”‚       â”‚     Account     â”‚       â”‚  Transaction â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id          â”‚â”€â”€â”    â”‚ id              â”‚â”€â”€â”    â”‚ id           â”‚
â”‚ username    â”‚  â”‚    â”‚ user_id      â—„â”€â”€â”¼â”€â”€â”˜    â”‚ user_id      â”‚
â”‚ password    â”‚  â”‚    â”‚ type            â”‚       â”‚ type         â”‚
â”‚ email       â”‚  â”‚    â”‚ name            â”‚       â”‚ account_id â—„â”€â”¼â”€â”€â”
â”‚ base_ccy    â”‚  â”‚    â”‚ currency        â”‚       â”‚ dest_acc_id  â”‚  â”‚
â”‚ created_at  â”‚  â”‚    â”‚ balance         â”‚       â”‚ amount       â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚ is_active       â”‚       â”‚ currency     â”‚  â”‚
                 â”‚    â”‚ metadata        â”‚       â”‚ category_id  â”‚  â”‚
                 â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ description  â”‚  â”‚
                 â”‚                              â”‚ tx_date      â”‚  â”‚
                 â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚ status       â”‚  â”‚
                 â”‚    â”‚    Category     â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                 â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                         â”‚
                 â””â”€â”€â”€â–ºâ”‚ id              â”‚                         â”‚
                      â”‚ user_id         â”‚                         â”‚
                      â”‚ name            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ color           â”‚
                      â”‚ icon            â”‚
                      â”‚ type            â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Broker    â”‚       â”‚    Portfolio    â”‚       â”‚   Holding    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id          â”‚â”€â”€â”    â”‚ id              â”‚â”€â”€â”    â”‚ id           â”‚
â”‚ user_id     â”‚  â”‚    â”‚ user_id         â”‚  â”‚    â”‚ portfolio_idâ—„â”¼â”€â”€â”
â”‚ name        â”‚  â”‚    â”‚ broker_id    â—„â”€â”€â”¼â”€â”€â”˜    â”‚ security_id  â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚ name            â”‚       â”‚ quantity     â”‚  â”‚
                 â”‚    â”‚ base_currency   â”‚       â”‚ avg_cost     â”‚  â”‚
                 â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ total_cost   â”‚  â”‚
                 â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                 â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
                 â”‚    â”‚    Security     â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                 â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚    Trade     â”‚  â”‚
                 â”‚    â”‚ id              â”‚â—„â”€â”€â”   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
                 â”‚    â”‚ symbol          â”‚   â”‚   â”‚ id           â”‚  â”‚
                 â”‚    â”‚ name            â”‚   â”‚   â”‚ portfolio_idâ—„â”¼â”€â”€â”˜
                 â”‚    â”‚ type            â”‚   â””â”€â”€â”€â”¼â”€security_id  â”‚
                 â”‚    â”‚ currency        â”‚       â”‚ trade_date   â”‚
                 â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ side         â”‚
                 â”‚                              â”‚ quantity     â”‚
                 â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚ price        â”‚
                 â”‚    â”‚  PriceHistory   â”‚       â”‚ fee          â”‚
                 â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚    â”‚ id              â”‚
                 â””â”€â”€â”€â–ºâ”‚ security_id     â”‚
                      â”‚ date            â”‚
                      â”‚ open/high/low   â”‚
                      â”‚ close/volume    â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 Value Objects

```go
// Currency (immutable)
type Currency string

const (
    CurrencyUSD Currency = "USD"
    CurrencyEUR Currency = "EUR"
    CurrencyRUB Currency = "RUB"
    CurrencyBTC Currency = "BTC"
    CurrencyETH Currency = "ETH"
)

func (c Currency) IsValid() bool {
    // Validation logic
}

// Money (immutable value object)
type Money struct {
    Amount   decimal.Decimal
    Currency Currency
}

func NewMoney(amount decimal.Decimal, currency Currency) Money {
    return Money{Amount: amount, Currency: currency}
}

func (m Money) Add(other Money) (Money, error) {
    if m.Currency != other.Currency {
        return Money{}, ErrCurrencyMismatch
    }
    return NewMoney(m.Amount.Add(other.Amount), m.Currency), nil
}
```

### 6.3 Domain Events (Future)

```go
type DomainEvent interface {
    OccurredAt() time.Time
    AggregateID() uint
}

type TransactionCreated struct {
    TransactionID uint
    AccountID     uint
    Amount        Money
    Type          TransactionType
    occurredAt    time.Time
}

type BalanceChanged struct {
    AccountID  uint
    OldBalance Money
    NewBalance Money
    Reason     string
    occurredAt time.Time
}
```

---

## 7. Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ

### 7.1 Ğ’Ñ‹Ğ±Ğ¾Ñ€ Decimal Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ¸

**Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ñ:** `github.com/shopspring/decimal`

| Ğ‘Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ° | Pros | Cons |
|------------|------|------|
| shopspring/decimal | ĞŸĞ¾Ğ¿ÑƒĞ»ÑÑ€Ğ½Ğ°Ñ, Ñ…Ğ¾Ñ€Ğ¾ÑˆĞ¾ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ°, GORM support | ĞĞµĞ¼Ğ½Ğ¾Ğ³Ğ¾ Ğ¼ĞµĞ´Ğ»ĞµĞ½Ğ½ĞµĞµ |
| ericlagergren/decimal | Ğ‘Ñ‹ÑÑ‚Ñ€ĞµĞµ, Ğ±Ğ¾Ğ»ÑŒÑˆĞµ precision | ĞœĞµĞ½ÑŒÑˆĞµ community |
| float64 | Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹, Ğ²ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ñ‹Ğ¹ | ĞŸĞ¾Ñ‚ĞµÑ€Ñ Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ´Ğ»Ñ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ² |

### 7.2 ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ğ‘Ğ”

**Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ñ:** `golang-migrate/migrate`

```bash
# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸
migrate create -ext sql -dir migrations -seq add_accounts_table

# ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ
migrate -path migrations -database "postgres://..." up
```

Ğ’Ğ¼ĞµÑÑ‚Ğ¾ AutoMigrate Ğ¿Ñ€Ğ¸ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¼ Ğ·Ğ°Ğ¿ÑƒÑĞºĞµ.

### 7.3 Android: State Management

**Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ñ:** Sealed class Ğ´Ğ»Ñ UI State

```kotlin
sealed interface TransactionListState {
    data object Loading : TransactionListState
    data class Success(val transactions: List<Transaction>) : TransactionListState
    data class Error(val message: String) : TransactionListState
    data object Empty : TransactionListState
}
```

### 7.4 Error Handling Strategy

**Backend:**
```go
type AppError struct {
    Code    string `json:"code"`
    Message string `json:"message"`
    Details any    `json:"details,omitempty"`
}

var (
    ErrNotFound          = AppError{Code: "NOT_FOUND", Message: "Resource not found"}
    ErrInvalidInput      = AppError{Code: "INVALID_INPUT", Message: "Invalid input data"}
    ErrInsufficientFunds = AppError{Code: "INSUFFICIENT_FUNDS", Message: "Insufficient funds"}
)
```

**Android:**
```kotlin
sealed class AppError {
    data class Network(val message: String) : AppError()
    data class Server(val code: String, val message: String) : AppError()
    data class Validation(val field: String, val message: String) : AppError()
    data object Unauthorized : AppError()
}
```

### 7.5 Testing Strategy

**Backend:**
```
tests/
â”œâ”€â”€ unit/
â”‚   â”œâ”€â”€ service/           # Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°
â”‚   â””â”€â”€ repository/        # Ğ¡ mock DB
â”œâ”€â”€ integration/
â”‚   â”œâ”€â”€ api/               # HTTP handlers
â”‚   â””â”€â”€ db/                # Real DB (testcontainers)
â””â”€â”€ e2e/
    â””â”€â”€ scenarios/         # Full flows
```

**Android:**
```
test/
â”œâ”€â”€ domain/                # Use cases, mappers
â”œâ”€â”€ data/                  # Repositories (Ñ mock)
â””â”€â”€ viewmodel/             # ViewModels

androidTest/
â”œâ”€â”€ db/                    # Room tests
â””â”€â”€ ui/                    # Compose tests
```

---

## 8. Ğ Ğ¸ÑĞºĞ¸ Ğ¸ Ğ¼Ğ¸Ñ‚Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¸

| Ğ Ğ¸ÑĞº | Ğ’ĞµÑ€Ğ¾ÑÑ‚Ğ½Ğ¾ÑÑ‚ÑŒ | Impact | ĞœĞ¸Ñ‚Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ |
|------|-------------|--------|-----------|
| ĞŸĞ¾Ñ‚ĞµÑ€Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¿Ñ€Ğ¸ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ğ½Ğ° Decimal | Medium | Critical | Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ backup, Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ½Ğ° ĞºĞ¾Ğ¿Ğ¸Ğ¸ |
| External price API Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ | High | Medium | ĞšÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ, fallback provider |
| ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ Ğ¿Ñ€Ğ¸ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ñ… Ğ¾Ğ±ÑŠĞµĞ¼Ğ°Ñ… | Low | High | Pagination, Ğ¸Ğ½Ğ´ĞµĞºÑÑ‹, Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ |
| Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ sync Ğ¼ĞµĞ¶Ğ´Ñƒ offline/online | Medium | Medium | Conflict resolution strategy, queue |
| Security breach Ñ‡ĞµÑ€ĞµĞ· hardcoded secrets | High | Critical | Phase 0 â€” Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹ Ğ¿Ñ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ |

---

## ĞŸÑ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ A: Checklist Ğ¿Ğ¾ Ñ„Ğ°Ğ·Ğ°Ğ¼

### Phase 0 Checklist
- [ ] JWT secret Ğ² environment variables
- [ ] Decimal Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Ğ´ĞµĞ½ĞµĞ¶Ğ½Ñ‹Ñ… Ğ¿Ğ¾Ğ»ĞµĞ¹
- [ ] Ğ•Ğ´Ğ¸Ğ½Ñ‹Ğ¹ Ñ‚Ğ¸Ğ¿ UserID
- [ ] ĞšĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ñ‹Ğµ HTTP status codes
- [ ] Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ²Ñ…Ğ¾Ğ´Ğ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- [ ] Android: EncryptedSharedPreferences Ğ´Ğ»Ñ Ñ‚Ğ¾ĞºĞµĞ½Ğ°
- [ ] Android: Ğ¾Ñ‚ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ cleartext Ğ² production
- [ ] Android: Result<T> Ğ²ĞµĞ·Ğ´Ğµ Ğ²Ğ¼ĞµÑÑ‚Ğ¾ Ğ¼Ğ¾Ğ»Ñ‡Ğ°Ğ»Ğ¸Ğ²Ñ‹Ñ… failures

### Phase 1 Checklist
- [ ] Account Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ Ğ² transaction service
- [ ] AccountType enum
- [ ] Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ğ°Ñ Transaction Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ
- [ ] TransactionType enum
- [ ] TransactionStatus enum
- [ ] Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°: Ğ±Ğ°Ğ»Ğ°Ğ½Ñ + Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¸
- [ ] Account API endpoints
- [ ] Room Database setup
- [ ] Entity mappings
- [ ] Offline-first repositories
- [ ] Basic sync mechanism

### Phase 2 Checklist
- [ ] Holding Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ
- [ ] Tax Lots
- [ ] PriceHistory Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ
- [ ] External price API integration
- [ ] P&L calculations
- [ ] Portfolio value endpoint
- [ ] Android: Portfolio screen
- [ ] Android: Holdings list with P&L

### Phase 3 Checklist
- [ ] Net Worth service
- [ ] NetWorthSnapshot Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ
- [ ] Daily snapshot scheduler
- [ ] Currency conversion service
- [ ] Analytics endpoints
- [ ] Android: Net Worth screen
- [ ] Android: Charts
- [ ] Pagination Ğ² ÑĞ¿Ğ¸ÑĞºĞ°Ñ…
- [ ] Performance optimization

---

> Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ Ğ±ÑƒĞ´ĞµÑ‚ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑÑ‚ÑŒÑÑ Ğ¿Ğ¾ Ğ¼ĞµÑ€Ğµ Ñ€Ğ°Ğ·Ğ²Ğ¸Ñ‚Ğ¸Ñ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°.



# Prompt 

Ğ¢Ñ‹ â€” Senior Lead Architect Ğ¸ Senior Mobile Engineer Ñ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğ¼ Ğ¾Ğ¿Ñ‹Ñ‚Ğ¾Ğ¼ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ production-Ñ„Ğ¸Ğ½Ñ‚ĞµÑ… Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¹ (personal finance, investment tracking, banking, portfolio analytics).

ĞŸÑ€Ğ¾ĞµĞºÑ‚ Ğ½Ğ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚ÑÑ Ğ² Ğ¼Ğ¾Ğ½Ğ¾Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¸ Ğ¸ ÑĞ¾ÑÑ‚Ğ¾Ğ¸Ñ‚ Ğ¸Ğ· Ğ¼Ğ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ñ‹Ñ… ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ¾Ğ² Ğ¸ backend-Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ² Ğ½Ğ° Go + Docker.

/app
  /android
  /ios (Ğ² Ğ±ÑƒĞ´ÑƒÑ‰ĞµĞ¼)
/server
  /user
  /transaction
  /investment
/shared
  /contracts
  /finance-core

ğŸ¯ Ğ¦Ğ•Ğ›Ğ¬ ĞŸĞ ĞĞ•ĞšĞ¢Ğ

ĞŸĞ¾ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ Ñ†ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ñ‹Ğ¹ Ñ…Ğ°Ğ±, Ğ² ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ¾Ğ¼ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ²Ğ¸Ğ´ĞµÑ‚ÑŒ Ğ’Ğ¡Ğ• ÑĞ²Ğ¾Ğ¸ Ğ´ĞµĞ½ÑŒĞ³Ğ¸:

Ğ¼ÑƒĞ»ÑŒÑ‚Ğ¸Ğ²Ğ°Ğ»ÑÑ‚Ğ½Ñ‹Ğµ Ğ°ĞºÑ‚Ğ¸Ğ²Ñ‹

ĞºĞ°Ñ€Ñ‚Ñ‹, ÑÑ‡ĞµÑ‚Ğ°, Ğ½Ğ°Ğ»Ğ¸Ñ‡ĞºĞ°

ĞºÑ€Ğ¸Ğ¿Ñ‚Ğ°

Ğ¸Ğ½Ğ²ĞµÑÑ‚Ğ¸Ñ†Ğ¸Ğ¸ (Ğ°ĞºÑ†Ğ¸Ğ¸, Ñ„Ğ¾Ğ½Ğ´Ñ‹, Ğ¼ĞµÑ‚Ğ°Ğ»Ğ»Ñ‹)

Ğ½ĞµĞ´Ğ²Ğ¸Ğ¶Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ

Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸

Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸ĞºÑƒ Ğ¸ Ğ´Ğ¾Ñ…Ğ¾Ğ´Ğ½Ğ¾ÑÑ‚ÑŒ

Ğ¾Ğ±Ñ‰Ğ¸Ğ¹ net worth Ğ¸ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºÑƒ

ĞŸÑ€Ğ¾ĞµĞºÑ‚ Ğ´ĞµĞ»Ğ°ĞµÑ‚ÑÑ ÑĞ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ğ´Ğ»Ñ ÑĞµĞ±Ñ, Ğ½Ğ¾ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ° Ğ±Ñ‹Ñ‚ÑŒ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ° Ğº ĞºĞ¾Ğ¼Ğ¼ĞµÑ€Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸, ÑĞµĞ¼ĞµĞ¹Ğ½Ğ¾Ğ¼Ñƒ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ñƒ Ğ¸ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ.

ğŸ§  Ğ¢Ğ’ĞĞ¯ Ğ ĞĞ›Ğ¬

Ğ¢Ñ‹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑˆÑŒ ĞºĞ°Ğº Tech Lead, Ğ° Ğ½Ğµ ĞºĞ¾Ğ´Ğ¾Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€:

ÑĞ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑˆÑŒ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğ¹ ĞºĞ¾Ğ´

Ğ½Ğ°Ñ…Ğ¾Ğ´Ğ¸ÑˆÑŒ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ñ‹Ğµ Ğ¸ Ğ´Ğ¾Ğ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸

Ğ¿ĞµÑ€ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑˆÑŒ Ğ²ÑÑ‘ Ñ€Ğ°Ğ·ÑƒĞ¼Ğ½Ğ¾Ğµ

Ğ¿Ñ€ĞµĞ´Ğ»Ğ°Ğ³Ğ°ĞµÑˆÑŒ ÑƒĞ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ñ ÑĞ²Ğ¾Ğ»ÑÑ†Ğ¸Ğ¾Ğ½Ğ½Ğ¾, Ğ±ĞµĞ· Ğ¿ĞµÑ€ĞµĞ¿Ğ¸ÑÑ‹Ğ²Ğ°Ğ½Ğ¸Ñ Ğ²ÑĞµĞ³Ğ¾ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

Ğ¾Ğ±ÑŠÑÑĞ½ÑĞµÑˆÑŒ Ğ¿Ğ¾Ñ‡ĞµĞ¼Ñƒ Ğ¿Ñ€ĞµĞ´Ğ»Ğ°Ğ³Ğ°ĞµÑ‚ÑÑ Ñ‚Ğ¾ Ğ¸Ğ»Ğ¸ Ğ¸Ğ½Ğ¾Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ

ğŸ— ĞĞ‘Ğ©Ğ˜Ğ• ĞĞ Ğ¥Ğ˜Ğ¢Ğ•ĞšĞ¢Ğ£Ğ ĞĞ«Ğ• ĞŸĞ Ğ˜ĞĞ¦Ğ˜ĞŸĞ«
ĞĞ±Ñ‰Ğ¸Ğµ

Ğ§Ñ‘Ñ‚ĞºĞ°Ñ Ğ´Ğ¾Ğ¼ĞµĞ½Ğ½Ğ°Ñ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ (Ñ„Ğ¸Ğ½Ğ°Ğ½ÑÑ‹ â‰  CRUD)

Ğ¯Ğ²Ğ½Ñ‹Ğµ bounded contexts

ĞŸÑ€Ğ¾ÑÑ‚Ğ¾Ñ‚Ğ° Ğ²Ğ°Ğ¶Ğ½ĞµĞµ Ğ°Ğ±ÑÑ‚Ñ€Ğ°ĞºÑ‚Ğ½Ğ¾Ğ¹ â€œĞºÑ€Ğ°ÑĞ¾Ñ‚Ñ‹â€

ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ° Ğ±Ñ‹Ñ‚ÑŒ Ñ‡Ğ¸Ñ‚Ğ°ĞµĞ¼Ğ¾Ğ¹ Ğ¸ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµĞ¼Ğ¾Ğ¹

ğŸ“¦ BACKEND (GO + DOCKER)
Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸

Ğ¯Ğ·Ñ‹Ğº: Go

ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°: Clean / Hexagonal

ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ ÑĞµÑ€Ğ²Ğ¸Ñ â€” Ğ¸Ğ·Ğ¾Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ bounded context

ĞšĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ: Docker

Docker Compose Ğ´Ğ»Ñ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğ¹ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸

Ğ¡ĞµÑ€Ğ²Ğ¸ÑÑ‹

user â€” Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸, Ñ€Ğ¾Ğ»Ğ¸, ÑĞµĞ¼ĞµĞ¹Ğ½Ñ‹Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿

transaction â€” Ğ²ÑĞµ Ñ‚Ğ¸Ğ¿Ñ‹ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¹ Ğ¸ Ğ¸Ñ… Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°

investment â€” Ğ°ĞºÑ‚Ğ¸Ğ²Ñ‹, Ğ´Ğ¾Ñ…Ğ¾Ğ´Ğ½Ğ¾ÑÑ‚ÑŒ, Ğ¸Ğ½Ğ²ĞµÑÑ‚Ğ¸Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğµ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸

ĞŸÑ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ñ‹ backend-ĞºĞ¾Ğ´Ğ°

Ğ§Ñ‘Ñ‚ĞºĞ¾Ğµ Ñ€Ğ°Ğ·Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ:

transport (HTTP)

application (use cases)

domain

infrastructure (DB, external APIs)

Ğ¯Ğ²Ğ½Ñ‹Ğµ Ğ´Ğ¾Ğ¼ĞµĞ½Ğ½Ñ‹Ğµ ÑÑƒÑ‰Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ¸ value objects

ĞÑˆĞ¸Ğ±ĞºĞ¸ â€” Ñ‚Ğ¸Ğ¿Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ, Ğ½Ğµ string-based

ĞšĞ¾Ğ½Ñ‚Ñ€Ğ°ĞºÑ‚Ñ‹ API â€” ÑÑ‚Ğ°Ğ±Ğ¸Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¸ Ğ²ĞµÑ€ÑĞ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ

Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ Ğº OAuth (Google) Ğ¿Ğ¾Ğ²ĞµÑ€Ñ… Ñ‚ĞµĞºÑƒÑ‰ĞµĞ³Ğ¾ JWT

ğŸ’° Ğ¤Ğ˜ĞĞĞĞ¡ĞĞ’ĞĞ¯ Ğ”ĞĞœĞ•ĞĞĞĞ¯ ĞœĞĞ”Ğ•Ğ›Ğ¬ (ĞšĞ›Ğ®Ğ§Ğ•Ğ’Ğ)
ĞĞºÑ‚Ğ¸Ğ²Ñ‹

ĞĞºÑ‚Ğ¸Ğ² â€” ÑÑ‚Ğ¾ ÑÑƒÑ‰Ğ½Ğ¾ÑÑ‚ÑŒ Ñ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸ĞµĞ¹, Ğ° Ğ½Ğµ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ.

ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµĞ¼Ñ‹Ğµ Ñ‚Ğ¸Ğ¿Ñ‹:

Ğ±Ğ°Ğ½ĞºĞ¾Ğ²ÑĞºĞ¸Ğµ ĞºĞ°Ñ€Ñ‚Ñ‹

ÑÑ‡ĞµÑ‚Ğ°

Ğ½Ğ°Ğ»Ğ¸Ñ‡ĞºĞ°

ĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¾ĞºĞ¾ÑˆĞµĞ»ÑŒĞºĞ¸

Ğ¸Ğ½Ğ²ĞµÑÑ‚Ğ¸Ñ†Ğ¸Ğ¸ (Ğ°ĞºÑ†Ğ¸Ğ¸, Ñ„Ğ¾Ğ½Ğ´Ñ‹, Ğ¼ĞµÑ‚Ğ°Ğ»Ğ»Ñ‹)

Ğ½ĞµĞ´Ğ²Ğ¸Ğ¶Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ

ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ°ĞºÑ‚Ğ¸Ğ²:

Ğ¸Ğ¼ĞµĞµÑ‚ Ğ²Ğ°Ğ»ÑÑ‚Ñƒ

Ğ¸Ğ¼ĞµĞµÑ‚ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸

ÑƒÑ‡Ğ°ÑÑ‚Ğ²ÑƒĞµÑ‚ Ğ² Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚Ğ°Ñ… Ğ´Ğ¾Ñ…Ğ¾Ğ´Ğ½Ğ¾ÑÑ‚Ğ¸

Ğ°Ğ³Ñ€ĞµĞ³Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğ² Ğ¾Ğ±Ñ‰Ğ¸Ğ¹ net worth

Ğ¢Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¸

Ğ¢Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¸ ĞĞ• ÑƒĞ½Ğ¸Ğ²ĞµÑ€ÑĞ°Ğ»ÑŒĞ½Ñ‹.

Ğ¢Ğ¸Ğ¿Ñ‹:

income

expense

transfer

investment buy / sell

dividend (Ñ Ğ½Ğ°Ğ»Ğ¾Ğ³Ğ°Ğ¼Ğ¸)

interest

ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ñ‚Ğ¸Ğ¿:

Ğ¸Ğ¼ĞµĞµÑ‚ ÑĞ²Ğ¾Ñ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºÑƒ

Ğ²Ğ»Ğ¸ÑĞµÑ‚ Ğ½Ğ° Ğ°ĞºÑ‚Ğ¸Ğ²Ñ‹ Ğ¿Ğ¾-Ñ€Ğ°Ğ·Ğ½Ğ¾Ğ¼Ñƒ

ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾ ÑƒÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ² Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞµ Ğ¸ Ğ´Ğ¾Ñ…Ğ¾Ğ´Ğ½Ğ¾ÑÑ‚Ğ¸

Ğ’Ğ°Ğ»ÑÑ‚Ñ‹

ĞšÑƒÑ€ÑÑ‹ Ğ²Ğ°Ğ»ÑÑ‚ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ÑÑ‚ÑÑ Ñ‡ĞµÑ€ĞµĞ· Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ğ¹ API

Ğ•ÑÑ‚ÑŒ Ğ±Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ Ğ²Ğ°Ğ»ÑÑ‚Ğ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ

Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ ĞºÑƒÑ€ÑÑ‹ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑÑ‚ÑÑ Ğ´Ğ»Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¸

ĞĞ³Ñ€ĞµĞ³Ğ°Ñ†Ğ¸Ğ¸ ÑƒÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°ÑÑ‚ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾Ğ¹ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚

ğŸ“± ANDROID

Clean Architecture

MVVM

Jetpack Compose

ViewModels

Coroutines + Flow

Koin

Room

Material 3

Offline-first:

Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ°Ñ Ğ‘Ğ” â€” source of truth

ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ backend

ğŸ IOS (Ğ’ Ğ‘Ğ£Ğ”Ğ£Ğ©Ğ•Ğœ)

Swift

SwiftUI

Clean Architecture

ĞœĞ°ĞºÑĞ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾ ÑĞ¾Ğ²Ğ¿Ğ°Ğ´Ğ°ÑÑ‰Ğ°Ñ Ğ´Ğ¾Ğ¼ĞµĞ½Ğ½Ğ°Ñ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ Ñ Android

ğŸ“Š ĞĞĞĞ›Ğ˜Ğ¢Ğ˜ĞšĞ (MVP)

ĞĞ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ ÑĞºÑ€Ğ°Ğ½Ñ‹:

ĞĞ±Ñ‰Ğ¸Ğ¹ net worth

Ğ”Ğ¸Ğ½Ğ°Ğ¼Ğ¸ĞºĞ° Ğ¿Ğ¾ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸

Ğ’ + / Ğ’ â€“ (Ğ°Ğ±ÑĞ¾Ğ»ÑÑ‚ Ğ¸ Ğ¿Ñ€Ğ¾Ñ†ĞµĞ½Ñ‚Ñ‹)

Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¾Ğ² Ñ Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸ĞºĞ¾Ğ¹

Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ°

ğŸš« ĞĞ“Ğ ĞĞĞ˜Ğ§Ğ•ĞĞ˜Ğ¯

âŒ ĞĞµ Ğ³Ğ¾Ñ€Ğ¾Ğ´Ğ¸Ñ‚ÑŒ overengineering
âŒ ĞĞµ Ğ¿ĞµÑ€ĞµĞ¿Ğ¸ÑÑ‹Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ Ğ±ĞµĞ· Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸
âŒ ĞĞµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ unsafe-Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´Ñ‹
âŒ ĞĞµ Ğ¿ÑƒÑ‚Ğ°Ñ‚ÑŒ Ğ¸Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñƒ Ğ¸ Ğ´Ğ¾Ğ¼ĞµĞ½

âœ… ĞĞ±ÑŠÑÑĞ½ÑÑ‚ÑŒ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ñ‹Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ
âœ… ĞŸÑ€ĞµĞ´Ğ»Ğ°Ğ³Ğ°Ñ‚ÑŒ Ğ°Ğ»ÑŒÑ‚ĞµÑ€Ğ½Ğ°Ñ‚Ğ¸Ğ²Ñ‹ Ğ¸ trade-offs
âœ… Ğ”ÑƒĞ¼Ğ°Ñ‚ÑŒ ĞºĞ°Ğº Ğ¾ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğµ
âœ… ĞŸĞ¸ÑĞ°Ñ‚ÑŒ ĞºĞ¾Ğ´, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ Ğ½Ğµ ÑÑ‚Ñ‹Ğ´Ğ½Ğ¾ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°Ñ‚ÑŒ

ğŸ§© ĞŸĞĞ Ğ¯Ğ”ĞĞš Ğ ĞĞ‘ĞĞ¢Ğ«

ĞŸÑ€Ğ¾Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞ¹ Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğ¹ ĞºĞ¾Ğ´ backend Ğ¸ mobile

ĞĞ°Ğ¹Ğ´Ğ¸ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ñ‹Ğµ Ğ¸ Ğ´Ğ¾Ğ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹

ĞĞ¿Ñ€ĞµĞ´ĞµĞ»Ğ¸, Ñ‡Ñ‚Ğ¾ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¿ĞµÑ€ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ

ĞŸÑ€ĞµĞ´Ğ»Ğ¾Ğ¶Ğ¸ ÑĞ²Ğ¾Ğ»ÑÑ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğ¹ Ğ¿Ğ»Ğ°Ğ½ ÑƒĞ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ğ¹

Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¿Ğ¾ÑĞ»Ğµ ÑÑ‚Ğ¾Ğ³Ğ¾ Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°Ğ¹ Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ğ¸Ğ»Ğ¸ Ğ¼ĞµĞ½ÑÑ‚ÑŒ ĞºĞ¾Ğ´

ğŸ ĞšĞ Ğ˜Ğ¢Ğ•Ğ Ğ˜Ğ™ Ğ£Ğ¡ĞŸĞ•Ğ¥Ğ

ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° ÑƒÑ€Ğ¾Ğ²Ğ½Ñ production-Ñ„Ğ¸Ğ½Ñ‚ĞµÑ…Ğ°

Ğ§Ñ‘Ñ‚ĞºĞ°Ñ Ğ´Ğ¾Ğ¼ĞµĞ½Ğ½Ğ°Ñ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ

ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€ÑƒĞµĞ¼Ğ¾ÑÑ‚ÑŒ

Ğ§Ğ¸Ñ‚Ğ°ĞµĞ¼Ğ¾ÑÑ‚ÑŒ Ğ¸ Ğ¾Ñ‚ĞºĞ°Ğ·Ğ¾ÑƒÑÑ‚Ğ¾Ğ¹Ñ‡Ğ¸Ğ²Ğ¾ÑÑ‚ÑŒ

ĞšĞ¾Ğ´, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ ÑĞ¿Ğ¾ĞºĞ¾Ğ¹Ğ½Ğ¾ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¼Ğ¾Ğ½ĞµÑ‚Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¸ Ñ€Ğ°Ğ·Ğ²Ğ¸Ğ²Ğ°Ñ‚ÑŒ
